<@row>
    <@columns sm=3><@p class='text-right font-weight-bold'>${entry.title!''}</@p></@columns>
    <@columns sm=9>
        <@p>
        <#assign coordinate = "" >
        <#assign datalayer = "" >
        <#if getResponseContainingTheFieldWithCode( list_responses, "coordinates_geojson" )?? >
        <#assign coordinate = getResponseContainingTheFieldWithCode( list_responses, "coordinates_geojson" ).toStringValueResponse >
        </#if>
        <#if getResponseContainingTheFieldWithCode( list_responses, "DataLayer" )?? >
        <#assign datalayer = getResponseContainingTheFieldWithCode( list_responses, "DataLayer" ).toStringValueResponse >
        </#if>
        
           Coordonn√©e : ${coordinate!}
           Datalayer : ${datalayer!}
        </@p>
        <#include "/skin/plugins/carto/manage_map.html" />
    </@columns>
</@row>        

<link href="js/plugins/leaflet/leaflet/leaflet.css" rel="stylesheet" />
<link href="js/plugins/leaflet/leaflet/MarkerCluster.css" rel="stylesheet" />
<link href="js/plugins/leaflet/leaflet/MarkerCluster.Default.css" rel="stylesheet" />
<link href="js/admin/plugins/carto/leaflet.draw.css" rel="stylesheet"></script>
<script type="text/javascript" src="js/plugins/leaflet/leaflet/leaflet.js"></script>
<script type="text/javascript" src="js/plugins/leaflet/leaflet/leaflet.markercluster.js"></script>
<script type="text/javascript" src="js/admin/plugins/carto/leaflet.draw.js"></script>
<script type="text/javascript" src="js/admin/plugins/carto/BoundaryCanvas.js"></script>
<script>

$(window).on('load', function(){
    // Retrieve the map object.
    var map = mapsPlaceholder.pop();
    
    var geojson = ${coordinate};
   	
   	if ( geojson["geometry"]["type"] == "Point" ) {
        var coordinates = geojson["geometry"]["coordinates"];
        var marker = L.marker([coordinates[1],coordinates[0]]).addTo(map);
    }
    else if ( geojson["geometry"]["type"] == "Polygon" ) {
        var coordinates = geojson["geometry"]["coordinates"];
        var polygon = L.polygon(coordinates ).addTo(map);
    }
    else if ( geojson["geometry"]["type"] == "Polyline" ) {
        var coordinates = geojson["geometry"]["coordinates"];
        var polyline = L.polyline(coordinates ).addTo(map);
    }
    
});
  </script>          
