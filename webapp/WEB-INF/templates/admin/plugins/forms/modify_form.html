<#include "/admin/plugins/forms/edit_form_tabs.html" />
<@pageContainer>
    <@pageColumn>
		<@pageHeader title=form.title!>
			<#if form.active>
				<@button type='button' id='forms-action' title='#i18n{forms.dashboard.row_actions}' buttonIcon='cog me-2' dropdownMenu=true >
					<@aButton color='default dropdown-item justify-content-start' href='jsp/admin/plugins/forms/ManageFormResponse.jsp?view=stepView&id_form=${form.id}&init=true' title='#i18n{forms.manageForm.BOLink.label} ${form.title}' buttonIcon='text-plus' />
					<@aButton color='default dropdown-item justify-content-start' href='${prod_url}jsp/site/Portal.jsp?page=forms&view=stepView&id_form=${form.id}&init=true' title='#i18n{forms.manageForm.FOLink.label} ${form.title} [#i18n{portal.site.portal_footer.newWindow}]' params='target="_blank"' buttonIcon='external-link' />
					<@aButton color='default dropdown-item justify-content-start' href='jsp/admin/plugins/forms/MultiviewForms.jsp?current_selected_panel=forms&id_form=${form.id}' title='#i18n{forms.manageForm.MultiviewLink.label} [#i18n{portal.site.portal_footer.newWindow}]' params='target="_blank"' buttonIcon='list-alt' />
					<#if form.breadcrumbName=='forms-breadcrumbaccordion.breadcrumbAccordion'>
					<@aButton color='default dropdown-item justify-content-start' href='jsp/admin/plugins/forms/modules/breadcrumbaccordion/ManageBreadcrumbAccordion.jsp?view=modifyBreadcrumb&id_form=${form.id}' title='#i18n{module.forms.breadcrumbaccordion.manage_breadcrumbAccordion.title}' buttonIcon='stack' />
					</#if>
					<@button type='button' class='default dropdown-item justify-content-start' id='toggleMap' title='#i18n{forms.modify_form.tab.graphicShow}' buttonIcon='sitemap' />
				</@button>
				<#if extendableResourceActionsHtml?? && extendableResourceActionsHtml?has_content>${extendableResourceActionsHtml!}</#if>
			</#if>
		</@pageHeader>
		<@formBreadCrumb><@breadcrumbItem>${form.title!}</@breadcrumbItem></@formBreadCrumb>
		<@tform class='form' id='modify_form' method='post' name='modify_form' action='jsp/admin/plugins/forms/ManageForms.jsp'>
		<@input type='hidden' id='id_form' name='id_form' value='${form.id}' />
		<@formTabs tab="general" >
		<@tabContent>
			<@tabPanel id='' active=true>
				<@formModel />
			</@tabPanel>
			<@bottomFormFixedButtons>
				<@headerButton name='action_modifyForm' label='forms.modify_form.buttonValidate' /> 
			</@bottomFormFixedButtons>
		</@tabContent>
		</@formTabs>
		</@tform>
	</@pageColumn>
</@pageContainer>
<@formEditor />
<@formModal />
<@formsToastr infos=infos warnings=warnings errors=errors />
<script>
document.addEventListener('DOMContentLoaded', function() {
	// Initial toggle based on checkbox state
	const endMessage = document.getElementById('endMessage');
	const endMessageDisplay = document.getElementById('endMessageDisplay');
	const labelEndMessageButton = document.getElementById('labelEndMessageButton');

	// Hide initially
	endMessage.classList.toggle('d-none', true);
	labelEndMessageButton.classList.toggle('d-none', true);

	// Show if checkbox is checked
	if (endMessageDisplay && endMessageDisplay.checked) {
		endMessage.classList.toggle('d-none', false);
		labelEndMessageButton.classList.toggle('d-none', false);
	}

	// Toggle on change
	document.getElementById('labelEndMessage').addEventListener('change', function() {
		endMessage.classList.toggle('d-none');
		labelEndMessageButton.classList.toggle('d-none');
	});
});
</script>