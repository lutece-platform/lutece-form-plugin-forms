

<#if getError( list_responses, entry )?? >
  <#assign error = getError( list_responses, entry ) >
</#if>
<#if getResponse( list_responses, entry )?? >
  <#assign response = getResponse( list_responses, entry ) >
</#if>

<div class="form-group">
  <#assign idName = buildEntryName( entry, entry_iteration_number )>
  <label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="${idName}">${entry.title}<#if entry.mandatory> *</#if></label>
  <@columns sm=12 md=6 lg=6>
    <div class="input-group">
      <span class="input-group-addon"><@icon style='calendar' class='fa-lg' /></span>
      <#assign field = getFieldByCode( entry, "default_date_value" ) >
      <input type="text" name="${idName}" id="${idName}" class="form-control input-sm ${entry.CSSClass!} <#if error??>error</#if>" value="${(response.toStringValueResponse)!(field.valueTypeDate)!}" />
      <#if entry.helpMessage?exists&&entry.helpMessage!=''>
        <span class="help-block">${entry.helpMessage}</span>
      </#if>
    </div>
  </@columns>
</div>
<#if list_responses??>
  <#list list_responses as response>
    <#if response.entry.idEntry == entry.idEntry && response.entry.error?? && response.entry.error.isDisplayableError>
      <div class="alert alert-danger">
        <#assign error = response.entry.error>
        <#if error.mandatoryError>
          #i18n{forms.message.mandatory.entry}
        <#else>
          ${error.errorMessage}
        </#if>
      </div>
    </#if>
  </#list>
</#if>

<@getDatePickerBootstrap idField="${idName}" language=locale.language />

<script type="text/javascript">
  $( document ).ready(function() {
    $("#attribute${idName}").on('changeDate', function(ev){
      $(this).datepicker('hide');
    });
  });
</script>