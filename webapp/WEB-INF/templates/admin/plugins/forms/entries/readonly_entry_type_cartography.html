<@row>
    <@columns sm=3><@p class='text-right font-weight-bold'>${entry.title!''}</@p></@columns>
    <@columns sm=9>
        <@p>
        <#assign coordinate = "" >
        <#assign datalayer = "" >
        <#if getResponseContainingTheFieldWithCode( list_responses, "coordinates_geojson" )?? >
        <#assign coordinate = getResponseContainingTheFieldWithCode( list_responses, "coordinates_geojson" ).toStringValueResponse >
        </#if>
        <#if getResponseContainingTheFieldWithCode( list_responses, "DataLayer" )?? >
        <#assign datalayer = getResponseContainingTheFieldWithCode( list_responses, "DataLayer" ).toStringValueResponse >
        </#if>
        </@p>
        <#include "/skin/plugins/carto/manage_map.html" />
    </@columns>
</@row>        
<script>
//Retrieve the map object.
var map = mapsPlaceholder.pop();
var geojson = ${coordinate};

map.whenReady(function () {

    if (geojson.geometry.type === "Point") {
        var c = geojson.geometry.coordinates;
        L.marker([c[1], c[0]]).addTo(map);
        map.setView([c[1], c[0]], 15);
    }

    else if (geojson.geometry.type === "Polygon") {
        var coords = geojson.geometry.coordinates[0];
        var latlngs = L.GeoJSON.coordsToLatLngs(coords);
        var polygon = L.polygon(latlngs).addTo(map);
        map.fitBounds(polygon.getBounds());
    }

    else if (geojson.geometry.type === "Polyline") {
        var coords = geojson.geometry.coordinates;
        var latlngs = L.GeoJSON.coordsToLatLngs(coords);
        var polyline = L.polyline(latlngs).addTo(map);
        map.fitBounds(polyline.getBounds());
    }

    map.invalidateSize(true);
});

</script>