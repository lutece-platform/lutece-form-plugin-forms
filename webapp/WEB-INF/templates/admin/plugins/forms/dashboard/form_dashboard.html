<@adminDashboardWidget title='#i18n{forms.dashboard.formList}' id='forms_dashboard' url=url>
<#if form_list?size gt 0>
<@listGroup class='list-group-flush py-0' >
<#list form_list as form>
	<@listGroupItem class='p-0' >
		<@card class='mb-1'>
			<@row class='align-items-center'>
				<@columns>
					<@h level=3 class='mb-0' params='title="#i18n{portal.util.labelModify} ${form.title}" style="--tw:300px"'>
						<#if !form.active><@icon style='times' class='text-danger' title='#i18n{portal.util.labelDisabled}' />	<#else>	<@icon style='check' class='text-success' title='#i18n{portal.util.labelEnabled}' /></#if>
						<@link href='jsp/admin/plugins/forms/ManageSteps.jsp?view=manageSteps&id_form=${form.id}' label='${form.title}' class='truncate' />
					</@h>
				</@columns>
				<@div class='col-auto d-flex align-items-center'>
					<@tag class='mx-2 fs-5' title='#i18n{forms.dashboard.row_responses}'> ${form.currentNumberResponse}</@tag>
					<#if form.actions?exists>
						<#list form.actions as action>
						<#if action.permission=='PARAM'>
							<@aButton class='btn-sm me-1' href='${action.url}&id_form=${form.id}' title='${action.name!}' hideTitle=['all'] buttonIcon='${action.iconUrl}' />
						</#if>
						<#if action.permission=='VIEW_FORM_RESPONSE' && form.currentNumberResponse gt 0>
							<@aButton class='btn-sm' href='${action.url}&id_form=${form.id}' title='${action.name!}' hideTitle=['all'] buttonIcon='${action.iconUrl}' />
						</#if>
						</#list>
					</#if>
				</@div>
				<@div class='col-auto'>
					<@div class='dropdown'>
						<a href="#" class="btn-action" data-bs-toggle="dropdown" aria-expanded="false">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
								<path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
								<path d="M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
								<path d="M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
							</svg>
						</a>
						<@div class="dropdown-menu dropdown-menu-end">
						<#if form.actions?exists>
							<#list form.actions as action>
								<#if action.permission=='DELETE'><#assign actionClass='text-danger' /><#else><#assign actionClass='' /></#if>
								<@link href='${action.url}&id_form=${form.id}' class='dropdown-item ${actionClass}'><@icon style=action.iconUrl! /> ${action.name!}</@link>
							</#list>
						</#if>
						<@link href='jsp/admin/plugins/forms/ManageFormResponse.jsp?view=stepView&id_form=${form.id}&init=true' label='#i18n{forms.manageForm.BOLink.label}' class='dropdown-item' />
						<#if form.active>
							<#assign inactiveBypass=''>
							<#assign color='success'>
						<#else>
							<#assign inactiveBypass='&ts='+timestamp+'&token='+inactiveBypassTokens[form.id?string]>
							<#assign color='warning'>
						</#if>
						<@link href='jsp/site/Portal.jsp?page=forms&view=stepView&id_form=${form.id}&init=true${inactiveBypass}' label='#i18n{forms.manageForm.FOLink.label}' class='dropdown-item' target='_blank' />
						</@div>
					</@div>
				</@div>
			</@row>
		</@card>
        <#--
		<@row>
			<@columns xs=12 md=8>
				<@h level=3 class='d-inline-block truncate' params='title="${form.title}" style="--tw:300px"'>
					<#if !form.active><@icon style='times' class='text-danger' title='#i18n{portal.util.labelDisabled}' />	<#else>	<@icon style='check' class='text-success' title='#i18n{portal.util.labelEnabled}' /></#if>
					<@tag class='mx-2 fs-5' title='#i18n{forms.dashboard.row_responses}'> ${form.currentNumberResponse}</@tag>
					${form.title}
				</@h>
			</@columns>
			<@columns xs=12 md=4 class='d-flex justify-content-end'>
				<#if form.actions?exists>
					<#assign color='primary' />
					<#list form.actions?filter( action -> ( action.description=='forms.action.modify.description'  ) ) as action>
						<#assign params='' />
						<#assign class='' />
						<@aButton href='${action.url}&id_form=${form.id}' title='${action.name} ${action.description}' hideTitle=['all'] class=class color=color buttonIcon=action.iconUrl  params=params />
					</#list>
				</#if>
				<@aButton href='jsp/admin/plugins/forms/ManageFormResponse.jsp?view=stepView&id_form=${form.id}&init=true' title='#i18n{forms.manageForm.BOLink.label} ${form.title}' buttonIcon='text-plus' hideTitle=['all'] class='btn btn-outline-secondary d-none d-xl-inline-block' />
				<#if form.active>
					<#assign inactiveBypass=''>
					<#assign color='success'>
				<#else>
					<#assign inactiveBypass='&ts='+timestamp+'&token='+inactiveBypassTokens[form.id?string]>
					<#assign color='warning'>
				</#if>
				<@aButton href='${prod_url}jsp/site/Portal.jsp?page=forms&view=stepView&id_form=${form.id}&init=true${inactiveBypass}' title='#i18n{forms.manageForm.FOLink.label} ${form.title}' params='target="_blank"' buttonIcon='external-link' hideTitle=['all'] class='btn btn-outline-secondary d-none d-xl-inline-block' color=color />
			</@columns>
		</@row>
		-->
	</@listGroupItem>
</#list>
</@listGroup>
<#else>
<@empty title='#i18n{portal.util.labelNoItem}' actionTitle='#i18n{forms.manageForm.buttonAdd}' actionUrl='jsp/admin/plugins/forms/ManageForms.jsp?view=createForm'/>
</#if>
</@adminDashboardWidget>
<@formModal id='pubModal' />